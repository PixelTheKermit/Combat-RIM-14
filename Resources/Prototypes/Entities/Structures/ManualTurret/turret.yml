- type: entity
  abstract: true
  parent: ConstructibleMachine
  id: WeaponBaseTurretManual
  name: turret
  description: A static, non-existent gun. Why are you praying?
  placement:
    mode: SnapgridCenter
  components:
    - type: ManualTurret # BRAND NEW COMPONENT FROM PIXEL CO. MADE FROM THE BLOOD AND SWEAT OF ONE POOR CODER!
      minAngle: 2
      maxAngle: 4
      angleIncrease: 1
      angleDecay: 2
      fireCost: 2.5
      soundGunshot: /Audio/Weapons/Guns/Gunshots/pistol.ogg
      fireRate: 12
    - type: Clickable
    - type: InteractionOutline
    - type: Transform
      anchored: true
    - type: Anchorable
      delay: 2
    - type: Physics
      bodyType: Dynamic
    - type: Pullable
    - type: Fixtures
      fixtures:
      - shape:
          !type:PhysShapeAabb
          bounds: "-0.15,-0.10,0.15,0.20"
        density: 1800
        mask:
        - MachineMask
        layer:
        - MachineLayer
    - type: Sprite
      netsync: false
      sprite: Objects/Weapons/Guns/turrets.rsi
      drawdepth: WallMountedItems
      layers:
        - state: syndie_lethal
    - type: SignalReceiver
      inputs:
        TurretClockwise: []
        TurretAntiClockwise: []
        TurretStopRot: []
        TurretShootSemi: []
        TurretShootAutoToggle: []
        TurretShootAutoOn: []
        TurretShootAutoOff: []
    - type: Damageable
      damageContainer: Inorganic
    - type: Destructible
      thresholds:
        - trigger:
            !type:DamageTrigger
            damage: 300
          # TODO: Construction graph
          behaviors:
            - !type:DoActsBehavior
              acts: [ "Destruction" ]
            - !type:PlaySoundBehavior
              sound:
                path: /Audio/Effects/metalbreak.ogg
            - !type:SpawnEntitiesBehavior
              spawn:
                SheetSteel1:
                  min: 3
                  max: 5
- type: entity
  abstract: true
  parent: WeaponBaseTurretManual
  id: WeaponBasePoweredTurretManual
  name: powered turret
  description: A static, non-existent powered gun. What are you hoping for?
  components:
    - type: Battery
      maxCharge: 500
      startingCharge: 0
    - type: ExaminableBattery
    - type: NodeContainer
      examinable: false
      nodes:
        input:
          !type:CableDeviceNode
          nodeGroupID: MVPower
    - type: BatteryCharger
      voltage: Medium
    - type: PowerNetworkBattery
      maxSupply: 50
      maxChargeRate: 10
      supplyRampTolerance: 10
      supplyRampRate: 5
    - type: Temperature
    - type: ApcPassiveHeater
    - type: AtmosExposed

- type: entity
  parent: WeaponBasePoweredTurretManual
  id: WeaponTurretManual
  name: turret
  description: A static, very heavy gun. You better hope it's not pointing at you!
  components:
    - type: Machine
      board: WeaponTurretManualCircuitboard
    - type: ItemSlots
      slots:
        turret_mag:
          name: Magazine
          insertSound: /Audio/Weapons/Guns/MagIn/pistol_magin.ogg
          ejectSound: /Audio/Weapons/Guns/MagOut/pistol_magout.ogg
          priority: 1
          whitelist:
            tags:
              - MagazineBoxMinigun
    - type: ContainerContainer
      containers:
        turret_mag: !type:ContainerSlot

- type: entity
  parent: WeaponBasePoweredTurretManual
  id: WeaponLaserTurretManual
  name: laser turret
  description: A static, very heavy laser gun. You better hope it doesn't fire when you look at it!
  components:
    - type: Machine
      board: WeaponLaserTurretManualCircuitboard
    - type: ManualTurret 
      fireCost: 62.5
      soundGunshot: /Audio/Weapons/Guns/Gunshots/laser.ogg
      fireRate: 1
      isBatteryWeapon: true
      machinePartFiringSpeed: Laser
    - type: Sprite
      layers:
        - state: laser
    - type: SignalReceiver
      inputs:
        TurretClockwise: []
        TurretAntiClockwise: []
        TurretStopRot: []
        TurretShootSemi: []
    - type: ProjectileBatteryAmmoProvider
      proto: EmitterBolt

- type: entity
  parent: WeaponBasePoweredTurretManual
  id: WeaponRocketTurretManual
  name: rocket launcher turret
  description: A very dangerous gun. Use with caution.
  components:
    - type: Machine
      board: WeaponRocketTurretManualCircuitboard
    - type: ManualTurret
      fireCost: 125
      soundGunshot: /Audio/Weapons/Guns/Gunshots/rpgfire.ogg
      fireRate: 0.25
    - type: Sprite
      layers:
        - state: rocket
    - type: SignalReceiver
      inputs:
        TurretClockwise: []
        TurretAntiClockwise: []
        TurretStopRot: []
        TurretShootSemi: []
    - type: ItemSlots
      slots:
        turret_mag:
          name: Magazine
          insertSound: /Audio/Weapons/Guns/MagIn/pistol_magin.ogg
          ejectSound: /Audio/Weapons/Guns/MagOut/pistol_magout.ogg
          priority: 1
          whitelist:
            tags:
              - RocketAmmoBox

- type: entity
  parent: WeaponBasePoweredTurretManual
  id: WeaponShotgunTurretManual
  name: shotgun turret
  description: A static, very heavy shotgun. You better pray none of the shots hit you!
  components:
    - type: Machine
      board: WeaponShotgunTurretManualCircuitboard
    - type: ManualTurret
      fireCost: 7.5
      soundGunshot: /Audio/Weapons/Guns/Gunshots/shotgun.ogg
      fireRate: 1.5
    - type: Sprite
      layers:
        - state: shotgun
    - type: SignalReceiver
      inputs:
        TurretClockwise: []
        TurretAntiClockwise: []
        TurretStopRot: []
        TurretShootSemi: []
    - type: ItemSlots
      slots:
        turret_mag:
          name: Magazine
          insertSound: /Audio/Weapons/Guns/MagIn/pistol_magin.ogg
          ejectSound: /Audio/Weapons/Guns/MagOut/pistol_magout.ogg
          priority: 1
          whitelist:
            tags:
              - ShotgunAmmoBox